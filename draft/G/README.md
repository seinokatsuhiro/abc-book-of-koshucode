# G. 判断と関係

A から F までの内容には，甲州記法の基本要素が含まれています．
そのため，ここでは，データを読み・書き・計算する方法をまとめて，
ひとつの枠組みとして理解できる視点を与えましょう．


## 判断

甲州記法では，データを判断という形式で書きます．
判断は，なにかが正しいか間違っているかを述べたもので，
肯定判断と否定判断があります．たとえば，

 - `3` と `4` を足すと `7` になる

ことが正しいと思うなら，この文のパターンに
`A-PLUS-B-EQ-C` のような名前を与え，
文のなかの置き換え可能な要素に
`/a` `/b` `/c` のような名前を与え，
肯定判断記号 `|--` をつけて，判断データを記述します．

``` text
|-- A-PLUS-B-EQ-C  /a 3  /b 4  /c 7
```

この判断は全体として，つぎの日本語に翻訳されます．

 - `/a 3` と `/b 4` を足すと `/c 7` になることは正しい．

なにかが間違っていること，たとえば，

 - `/a 3` と `/b 4` を足すと `/c 5` になることは間違い．

という判断をあらわすには，肯定判断 `|--` ではなく，
否定判断 `|-X` を使います．

``` text
|-X A-PLUS-B-EQ-C  /a 3  /b 4  /c 5
```

これらの判断の甲州記法上の構成要素を一覧します．

 - 肯定判断記号 `|--`
 - 否定判断記号 `|-X`
 - 判断種 `A-PLUS-B-EQ-C`
 - 項目名 `/a` `/b` `/c`
 - 項目内容 `3` `4` `5` `7`

判断記号 `|--` のたて棒の部分は，
1879 年に [革命的な論理体系][概念記法]
を発表したフレーゲにちなんで，
フレーゲ・ストロークとよばれています．
フレーゲ自身は `|` を判断線，`--` を内容線とよび，
内容線 `--` に導かれた判断可能な内容が
正しいと主張できるときに `|` を書くとしています．
甲州記法は，データを計算するための単純な計算体系なので，
判断線と内容線が分割されることはありません．


## 関係

甲州計算機 `koshu` は，判断集合を入力として，
なんらかの計算を行い，計算結果を判断集合として出力します．
`source` が入力判断集合から特定の肯定判断を読み込む操作を行いで，
`affirm` と `deny` は，それぞれ，
肯定判断と否定判断を書き出す操作を行います．
この入出力の窓口となる演算子の間で，さまざまな計算が行われます．

これまで，はっきりと説明されていませんでしたが，
計算過程では判断が使われるわけではありません．
というのは，`affirm`・`deny` が
計算結果に判断種を付与していることが示しているように，
計算結果そのものには，判断種がついていないからです．
計算過程は，

``` text
|-- A-PLUS-B-EQ-C  /a 3  /b 4  /c 7
```

から判断記号と判断種を取り除いた

``` text
/a 3  /b 4  /c 7
```

という組の形式になっています．
この組は `/a` `/b` `/c` という項目間に
一定の関係が成り立つものであり，
そのような組の集合そのものも関係とよびます．

組集合としての関係は
データに関する計算を行うための
すぐれた媒体です．
関係から関係へと変換するような
計算を扱う体系のひとつは，
1970 年ころにコッドが考案した
[関係モデル][関係モデル] です．
甲州記法の計算体系は，
関係モデルに準拠しています．


## 計算

判断集合から判断集合へという計算は，
関係を中間媒体として実行されます．
現実には，関係から関係を計算する，
さまざまな，演算子がありますが，
それらを関係演算子としてひとまとめにすれば，
甲州計算機は，つぎのような枠組みで動作します．

 - 入力データとして判断集合が与えらえます．

 - 演算子 `source` は，判断集合から特定の判断を，
   指定された項目で読み込み，
   それを計算向きの形式である関係に変換します．

 - 演算子 `add` や `hold` などが，
   関係から関係へと変換する計算を行います．
   甲州記法では，関係から関係へという
   計算を行う単位を関係写像とよびます．
   `add` や `hold` のような関係演算子は，
   それらに十分な引数を与えることで，
   関係写像になると理解できます．

 - 演算子 `affirm` は，
   計算結果の関係に判断種を付与して，
   肯定判断として書き出します．

 - 演算子 `deny` は，
   計算結果の関係に判断種を付与して，
   否定判断として書き出します．

 - 出力データとして判断集合が得られます．


[概念記法]:   http://ja.wikipedia.org/wiki/概念記法
[関係モデル]: http://ja.wikipedia.org/wiki/関係モデル

