# V. 所属関係


集合は複数の内容をひとつにまとめたものです。
たとえば、`1` `3` `5` という 3 つの内容をまとめると
`{ 1 : 3 : 5 }` という集合が得られます。
この `1` が `{ 1 : 3 : 5 }` の内容のひとつであるという
**所属関係** は、

 - `/x 1` は `/xs { 1 : 3 : 5 }` の内容のひとつである。

という判断として定式化できます。
この判断に `MEMBER` という判断種を与えると、
つぎのような判断集合として書きあらわせます。

``` text
|-- MEMBER  /x 1  /xs { 1 : 3 : 5 }
|-- MEMBER  /x 3  /xs { 1 : 3 : 5 }
|-- MEMBER  /x 5  /xs { 1 : 3 : 5 }
```

集合 `/xs` として `{ 1 : 3 : 5 }` だけではなく、
`{ 1 }` や `{ 1 : 3 }` や `{ 1 : 2 : 3 : 4 :5 }` など、
さまざまな集合が無数に考えられるので、
この判断集合は無限の大きさになるでしょう。
無限の集合は、そのままでは、扱えないので、
データとしての判断集合の代わりに、
計算を行う関係写像演算子を考えることにします。


## 所属関係の検査

必ずしも `/x` が `/xs` の内容ではない判断集合

``` text
|-- A  /x 1  /xs { 1 : 3 : 5 }
|-- A  /x 2  /xs { 1 : 3 : 5 }
|-- A  /x 3  /xs { 1 : 3 : 5 }
|-- A  /x 4  /xs { 1 : 3 : 5 }
```

から `MEMBER` に合致する判断だけを残すには、
つぎのような `MEMBER` との交わりを計算します。

``` text
|== A-MEET
  | source A /x /xs
  | meet ( source MEMBER /x /xs )
```

この計算結果は、つぎのようになります。

``` text
|-- A-MEET  /x 1  /xs { 1 : 3 : 5 }
|-- A-MEET  /x 3  /xs { 1 : 3 : 5 }
```

この `meet ( source MEMBER /x /xs )` を
`member /x /xs` と書けると想像すると、
つぎのような計算式に書き直せます。

``` text
|== A-MEM
  | source A /x /xs
  | member /x /xs
```

関係写像演算子 `member` は、
`/x` が `/xs` に所属するという
関係をみたすかどうかを検査します。
そのため、`meet` のときと同じ結果になります。

``` text
|-- A-MEM  /x 1  /xs { 1 : 3 : 5 }
|-- A-MEM  /x 3  /xs { 1 : 3 : 5 }
```


## 集合の展開

`member` は `/x` が `/xs` に所属することを検査するだけでなく、
集合 `/xs` から `/x` を求めるためにも使えます。
たとえば、集合 `/xs` だけをもつ判断集合

``` text
|-- B  /xs { 1 : 3 : 5 }
|-- B  /xs { 2 : 4 }
```

があるとき、つぎのような `/x` を
未知の項目とする計算式をつくります。

``` text
|== B-MEM
  | source B /xs
  | member /x /xs
```

これは、つぎのようなデータ解釈

 - `/x` は `/xs { 1 : 3 : 5 }` に所属する。

 - `/x` は `/xs { 2 : 4 }` に所属する。

をみたす `/x` をもとめる計算として機能します。
実際、[`koshu V.k`][V.k] によって計算すると、
つぎの判断集合が出力されます。

``` text
|-- B-MEM  /x 1  /xs { 1 : 3 : 5 }
|-- B-MEM  /x 3  /xs { 1 : 3 : 5 }
|-- B-MEM  /x 5  /xs { 1 : 3 : 5 }
|-- B-MEM  /x 2  /xs { 2 : 4 }
|-- B-MEM  /x 4  /xs { 2 : 4 }
```

この例とは逆に、`member /x /xs` への入力が、
項目 `/x` をもち、`/xs` をもたないときはどのようになるでしょうか。
`/x` を内容とする `/xs` は無数に存在します。
そのような無数の `/xs` を理論上は考えられますが、
実際には計算できません。
そのため、`member` は、`/x` `/xs` の両方が与えられるか、
`/xs` だけが与えられる場合に計算を行います。


[V.k]:   https://github.com/seinokatsuhiro/abc-of-koshucode/blob/master/draft/japanese/section/V/V.k

<!-- ------------------------------------------------------------------
|-- TERM  /ja0 'し  /ja '所属関係        /en "membership"
------------------------------------------------------------------- -->

