# G. 判断と関係


B から F までの内容には、甲州記法の基本要素が含まれています。
そのため、ここでは、データを読み・書き・計算する方法をまとめて、
ひとつの枠組みとして理解できる視点を与えましょう。


## 判断

甲州記法では、データを判断という形式で書きます。
判断は、なにかが正しいか間違っているかを述べたもので、
肯定判断と否定判断があります。たとえば、

 - 3 と 4 を足すと 7 になる

ことが正しいと思うなら、この文のパターンに
`A-PLUS-B-EQ-C` のような名前を与え、
文のなかの置き換え可能な要素に
`/a` `/b` `/c` のような名前を与え、
肯定判断記号 `|--` をつけて、判断データを記述します。

``` text
|-- A-PLUS-B-EQ-C  /a 3  /b 4  /c 7
```

この判断は全体として、つぎの日本語に翻訳されます。

 - `/a 3` と `/b 4` を足すと `/c 7` になることは正しい。

なにかが間違っていること、たとえば、

 - `/a 3` と `/b 4` を足すと `/c 5` になることは間違い。

という判断をあらわすには、肯定判断 `|--` ではなく、
否定判断 `|-X` を使います。

``` text
|-X A-PLUS-B-EQ-C  /a 3  /b 4  /c 5
```

これらの判断の甲州記法上の構成要素を一覧します。

 - 肯定判断記号 `|--`
 - 否定判断記号 `|-X`
 - 判断種 `A-PLUS-B-EQ-C`
 - 項目名 `/a` `/b` `/c`
 - 項目内容 `3` `4` `5` `7`

判断記号 `|--` のたて棒の部分は、
1879 年に [革命的な論理体系][概念記法]
を発表したフレーゲにちなんで、
フレーゲ・ストロークとよばれています。
フレーゲ自身は `|` を **判断線** 、`--` を **内容線** とよび、
内容線 `--` に導かれた判断可能な内容が
正しいと主張できるときに `|` を書くとしています。
甲州記法は、データを計算するための単純な計算体系なので、
判断線と内容線を分割して使用する場面はありませんが、
`|--` の記号と意味はフレーゲの考え方にしたがっています。


## 関係

甲州計算機 `koshu` は、判断集合を入力として、
なんらかの計算を行い、計算結果を判断集合として出力します。
`source` が入力判断集合から特定の肯定判断を読み込む操作を行い、
`|==` と `|=X` は、それぞれ、
肯定判断と否定判断を書き出す操作を行います。
これらの入出力の窓口となる演算子の間で、さまざまな計算が行われます。

これまで、はっきりと説明されていませんでしたが、
`source` から `|==` の直前までの計算過程では
判断が使われるわけではありません。
というのは、`|==` と `|=X` が
計算結果に判断種を付与していることが示しているように、
計算結果そのものには、判断種がついていないからです。
計算過程では、

``` text
|-- A-PLUS-B-EQ-C  /a 3  /b 4  /c 7
```

から判断記号 `|--` と判断種 `A-PLUS-B-EQ-C` を取り除いた

``` text
/a 3  /b 4  /c 7
```

という **組** になっています。
この組は `/a` `/b` `/c` という項目間に
一定の関係が成り立つものであり、
そのような組の集合を **関係の外延** 、
通常は、単に、 **関係** とよびます。

組集合としての関係は
データに関する計算を行うための
すぐれた媒体です。
関係から関係へと変換するような
計算を扱う体系のひとつとして、
1970 年ころにコッドが考案した
[**関係モデル**][関係モデル] があります。
甲州記法の計算体系は、
関係モデルに準拠しています。


## 計算

判断集合から判断集合へという計算は、
関係を中間媒体として実行されます。
現実には、関係から関係を計算する、
さまざまな演算子がありますが、
それらの演算子による計算をひとまとめにすれば、
甲州計算機は、つぎのような枠組みで動作します。

 - 入力データとして判断集合が与えらえます。

 - 演算子 `source` は、判断集合から特定の判断を、
   指定された項目で読み込み、
   それを計算向きの形式である関係に変換します。

 - 演算子 `add` や `keep` などが、
   関係から関係へと変換する計算を行います。
   甲州記法では、関係から関係へという
   計算を行う単位を **関係写像** とよびます。
   たとえば，`add /d ( /a + /b + /c )` という式は、
   ひとつの関係写像を表示しています。

 - 判断記号 `|==` は、
   計算結果の関係に判断種を付与して、
   肯定判断として書き出します。
   判断集合は `|--` が複数出てくるので、
   `|--` をたてに重ねた記号が `|==` であると想像してもいいですし、
   電卓で `=` ボタンを押すと計算結果が出るように、
   `|==` で計算結果が判断集合として出力されると想像してもよいでしょう。

 - 判断記号 `|=X` は、
   計算結果の関係に判断種を付与して、
   否定判断として書き出します。

 - 出力データとして判断集合が得られます。


[概念記法]:   http://ja.wikipedia.org/wiki/概念記法
[関係モデル]: http://ja.wikipedia.org/wiki/関係モデル

